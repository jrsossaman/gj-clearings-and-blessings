{% extends 'admin_dashboard.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'app/css/update_forms.css' %}">
{% endblock %}

{% block content %}

<h3>You can make updates to {{ selected_client.first_name }} {{ selected_client.last_name }}'s account.</h3>

<div class="form-container">
    <form method="post" novalidate>
        {% csrf_token %}
        <strong>Add a new client.</strong>

        {% for field in client_form %}
            <p>
                {{ field.label_tag }}<br>
                {{ field }}

                {% if field.errors %}
                    {% for error in field.errors %}
                        <span class="p-error" style="color:red;">{{ error }}</span>
                    {% endfor %}
                {% endif %}
            </p>
        {% endfor %}

        <button type="submit" class="lesser-link" name="submit_client">
            Add Client
        </button>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var personOrPetField = document.getElementById('id_person_or_pet');
                var speciesField = document.getElementById('id_species');
                var genderField = document.getElementById('id_gender');
                
                function toggleFields() {
                    if (personOrPetField.value === 'pet') {
                        speciesField.parentElement.style.display = 'block';
                        genderField.parentElement.style.display = 'block';
                    } else {
                        speciesField.parentElement.style.display = 'none';
                        genderField.parentElement.style.display = 'none';
                    }
                }
    
                // Initial check in case there's an existing value
                toggleFields();
    
                // Listen for changes to the 'person_or_pet' field
                personOrPetField.addEventListener('change', toggleFields);
            });
        </script>
    </form>

    <form method="post" novalidate>
        {% csrf_token %}
        <strong>Add a new location.</strong>

        {% for field in location_form %}
            <p>
                {{ field.label_tag }}<br>
                {{ field }}

                {% if field.errors %}
                    {% for error in field.errors %}
                        <span class="p-error" style="color:red;">{{ error }}</span>
                    {% endfor %}
                {% endif %}
            </p>
        {% endfor %}

        <button type="submit" class="lesser-link" name="submit_location">
            Add Location
        </button>
    </form>
</div>

{% comment %}
<div class="form-container">
    <form method="post">
        {% csrf_token %}
        <label style="font-weight: bold">Add a new client.
            {{ client_form.as_p }}
            <button type="submit" class='lesser-link' name="submit_client">Add Client</button>
        </label>
    </form>

    <form method="post">
        {% csrf_token %}
        <label style="font-weight: bold">Add a new location.
            {{ location_form.as_p }} 
            <button type="submit" class='lesser-link' name="submit_location">Add Location</button>
        </label>
    </form>
</div>
{% endcomment %}


{% endblock %}